<%- include("partials/header") %> <%- include("partials/nav") %>
<div class="w-full mx-auto p-10 flex h-full">
  <div class="left">
    <div class="users flex flex-col gap-5">
      <% users.forEach(SingleData=>{ %>
      <div
        onclick="openChat('<%= SingleData.avatar.url %>','<%= SingleData.username %>')"
        style="border-radius: 0.5rem"
        class="cursor-pointer flex gap-3 items-center p-2 rounded-2 bg-slate-200 w-fit"
      >
        <img
          class="h-[4rem] w-[4rem]"
          style="border-radius: 50%"
          src="<%= SingleData.avatar.url %>"
          alt=""
        />
        <h1><%= SingleData.username %></h1>
      </div>
      <% }) %>
    </div>
  </div>
  <div class="right w-full bg-slate-300 h-screen p-2 relative">
    <div class="top absolute top-0">
      <div
        style="border-radius: 0.5rem"
        class="touchfun cursor-pointer flex gap-3 items-center p-2 rounded-2 w-fit"
      >
        <img
          class="h-[4rem] w-[4rem]"
          style="border-radius: 50%"
          src="https://images.unsplash.com/photo-1484589065579-248aad0d8b13?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YWJzdHJhY3R8ZW58MHx8MHx8fDA%3D"
          alt=""
        />
        <h1>Username</h1>
      </div>
    </div>
    <div class="bottom h-full">
      <div class="converationArea h-full"></div>

      <div
        class="inputField absolute bottom-0 p-3 w-full flex items-center justify-center gap-3"
      >
        <input
          type="text"
          class="p-3 w-[75%]"
          style="border-radius: 0.7rem"
          placeholder="Enter message"
        />
        <button
          class="p-3 bg-slate-200 rounded-full"
          style="border-radius: 50%"
        >
          <i class="ri-send-plane-line"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<script src="/socket.io/socket.io.js"></script>

<script>
  var socket = io();
</script>

<script>
  function openChat(userImage, username) {
    document.querySelector(".right .top .touchfun img").src = userImage;
    document.querySelector(".right .top .touchfun h1").innerText = username;
  }
</script>
<%- include("partials/footer") %>
