<%- include('partials/header')%>
<!--  -->
<%- include('partials/nav')%>
<!--  -->
<div class="flex w-[80%] mx-auto p-10">
  <div class="w-[70%] px-10">
    <div class="flex w-full p-10">
      <div>
        <img
          class="avatarImage rounded-full w-[10vmax] h-[10vmax] object-cover"
          src="<%= user.avatar.url%>"
          alt="No image Found"
        />

        <form
          method="post"
          class="avatarForm"
          action="/users/avatar/<%= user._id%>"
          enctype="multipart/form-data"
        >
          <input class="avatarInput hidden" type="file" name="avatar" />
        </form>
      </div>

      <div class="ml-10">
        <h1 class="text-5xl font-extrabold"><%= user.username%></h1>
        <p class="mt-3"><%= user.email%></p>
      </div>
    </div>
    <form
      class="text-2xl m-auto"
      action="/users/update/<%=user._id%>"
      method="post"
    >
      <h1 class="mb-10 text-5xl font-bold">User Profile Details</h1>
      <input
        value="<%=user.email%>"
        class="w-full mb-5 border p-3 rounded"
        type="email"
        placeholder="example@email.com"
        name="email"
      />
      <input
        value="<%=user.username%>"
        class="w-full mb-5 border p-3 rounded"
        type="text"
        placeholder="username"
        name="username"
      />

      <button
        class="mb-5 hover:bg-blue-400 w-1/2 bg-blue-300 px-5 py-2 text-white rounded"
      >
        Update User Profile
      </button>
    </form>
  </div>

  <div class="w-[30%]">
    <h1 class="text-2xl font-bold">Setting Options</h1>
    <ul class="pt-5 flex flex-col gap-y-3 text-xl">
      <li><a href="/users/rest-password/<%=user._id%>">Reset Password</a></li>
      <li><a href="/users/logout">Logout User</a></li>
      <li><a href="/users/delete/<%=user._id%>">Delete User</a></li>
    </ul>
  </div>
</div>

<script>
  const avatarImage = document.querySelector(".avatarImage");
  const avatarInput = document.querySelector(".avatarInput");
  const avatarForm = document.querySelector(".avatarForm");

  avatarImage.addEventListener("click", () => {
    avatarInput.click();
  });

  avatarInput.addEventListener("change", () => {
    avatarForm.submit();
  });
</script>
